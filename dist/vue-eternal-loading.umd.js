(function(s,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(s=typeof globalThis<"u"?globalThis:s||self,t(s.TSPro={},s.Vue))})(this,function(s,t){"use strict";function E(e){return e.scrollHeight}function S(e){return e.scrollWidth}function P(e,i){e.scrollTop=e.scrollHeight-i+e.scrollTop}function b(e,i){e.scrollLeft=e.scrollWidth-i+e.scrollLeft}const L=t.defineComponent({name:"VueEternalLoading",props:{load:{required:!0,type:Function},isInitial:{required:!1,type:Boolean,default:!0},position:{required:!1,type:String,default:"default"},container:{required:!1,type:Object,default:null},margin:{required:!1,type:String,default:void 0}},setup(e,i){const n=t.ref();let a=t.ref("loading"),r=t.ref(e.isInitial),d=0;function f(){t.nextTick(()=>{var o,l;e.position==="top"?P((o=e.container)!=null?o:document.documentElement,d):e.position==="left"&&b((l=e.container)!=null?l:document.documentElement,d)})}function q(o,l){return o===0?r.value?(h(),"no-results"):(g(),"no-more"):o!==void 0&&l!==void 0&&o<l?(g(),"no-more"):(r.value=!1,f(),u(),"loading")}function g(){r.value=!1,c("no-more"),f()}function h(){r.value=!1,c("no-results"),f()}function O(){r.value=!1,c("error"),f()}function z(){r.value=!0,c("loading"),u()}function w(){c("loading"),u()}function c(o){a.value=o}function y(){n.value&&m.unobserve(n.value)}function u(){n.value&&m.observe(n.value)}function H(){return new IntersectionObserver(([o])=>{var l,p;o.isIntersecting&&(e.position==="top"?d=E((l=e.container)!=null?l:document.documentElement):e.position==="left"&&(d=S((p=e.container)!=null?p:document.documentElement)),y(),e.load({loaded:q,noMore:g,noResults:h,error:O},{isFirstLoad:r.value}))},{root:e.container,threshold:0,rootMargin:e.margin})}let m;return typeof IntersectionObserver<"u"&&t.watchEffect(()=>{m&&y(),m=H(),u()},{flush:"post"}),t.watch(()=>e.isInitial,o=>{o&&z()}),t.watch(r,o=>{o||i.emit("update:isInitial",!1)}),{rootRef:n,state:a,isFirstLoad:r,retry:w}}}),V=(e,i)=>{const n=e.__vccOpts||e;for(const[a,r]of i)n[a]=r;return n},_={class:"vue-eternal-loading",ref:"rootRef"},v=t.createElementVNode("div",{class:"loading"},"Loading...",-1),k=t.createElementVNode("div",{class:"no-more"},"No more.",-1),F=t.createElementVNode("div",{class:"no-results"},"No results.",-1),I=t.createElementVNode("div",{class:"error"},"Error.",-1);function N(e,i,n,a,r,d){return t.openBlock(),t.createElementBlock("div",_,[e.state==="loading"?t.renderSlot(e.$slots,"loading",t.normalizeProps(t.mergeProps({key:0},{isFirstLoad:e.isFirstLoad})),()=>[v]):e.state==="no-more"?t.renderSlot(e.$slots,"no-more",t.normalizeProps(t.mergeProps({key:1},{retry:e.retry})),()=>[k]):e.state==="no-results"?t.renderSlot(e.$slots,"no-results",t.normalizeProps(t.mergeProps({key:2},{retry:e.retry})),()=>[F]):e.state==="error"?t.renderSlot(e.$slots,"error",t.normalizeProps(t.mergeProps({key:3},{retry:e.retry})),()=>[I]):t.createCommentVNode("",!0)],512)}const T=V(L,[["render",N]]);s.VueEternalLoading=T,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
