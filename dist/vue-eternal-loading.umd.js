(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s.TSPro={},s.Vue))})(this,function(s,e){"use strict";function _(t){return t.scrollHeight}function P(t){return t.scrollWidth}function b(t,l){t.scrollTop=t.scrollHeight-l+t.scrollTop}function V(t,l){t.scrollLeft=t.scrollWidth-l+t.scrollLeft}const N=e.createElementVNode("div",{class:"loading"},"Loading...",-1),k=e.createElementVNode("div",{class:"no-more"},"No more.",-1),I=e.createElementVNode("div",{class:"no-results"},"No results.",-1),L=e.createElementVNode("div",{class:"error"},"Error.",-1),T=e.defineComponent({__name:"VueEternalLoading",props:{load:{required:!0,type:Function},isInitial:{required:!1,type:Boolean,default:!0},position:{required:!1,type:String,default:"default"},container:{required:!1,type:Object,default:null},margin:{required:!1,type:String,default:void 0}},emits:["update:isInitial"],setup(t,{emit:l}){const r=t,a=e.ref();let c=e.ref("loading"),n=e.ref(r.isInitial);const q=typeof process<"u"&&process.env!==void 0&&process.env.NODE_ENV!=="test";let f=0;function u(){e.nextTick(()=>{var o,i;r.position==="top"?b((o=r.container)!=null?o:document.documentElement,f):r.position==="left"&&V((i=r.container)!=null?i:document.documentElement,f)})}function F(o,i){return o===0?n.value?(y(),"no-results"):(g(),"no-more"):o!==void 0&&i!==void 0&&o<i?(g(),"no-more"):(n.value=!1,u(),m(),"loading")}function g(){n.value=!1,d("no-more"),u()}function y(){n.value=!1,d("no-results"),u()}function O(){n.value=!1,d("error"),u()}function z(){n.value=!0,d("loading"),m()}function h(){d("loading"),m()}function d(o){c.value=o}function E(){a.value&&p.unobserve(a.value)}function m(){a.value&&p.observe(a.value)}function w(){return new IntersectionObserver(([o])=>{var i,S;o.isIntersecting&&(r.position==="top"?f=_((i=r.container)!=null?i:document.documentElement):r.position==="left"&&(f=P((S=r.container)!=null?S:document.documentElement)),E(),r.load({loaded:F,noMore:g,noResults:y,error:O},{isFirstLoad:n.value}))},{root:r.container,threshold:0,rootMargin:r.margin})}let p;return typeof IntersectionObserver<"u"&&e.watchEffect(()=>{p&&E(),p=w(),m()},{flush:"post"}),e.watch(()=>r.isInitial,o=>{o&&z()}),e.watch(n,o=>{o||l("update:isInitial",!1)}),(o,i)=>e.unref(q)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"vue-eternal-loading",ref_key:"rootRef",ref:a},[e.unref(c)==="loading"?e.renderSlot(o.$slots,"loading",e.normalizeProps(e.mergeProps({key:0},{isFirstLoad:e.unref(n)})),()=>[N]):e.unref(c)==="no-more"?e.renderSlot(o.$slots,"no-more",e.normalizeProps(e.mergeProps({key:1},{retry:h})),()=>[k]):e.unref(c)==="no-results"?e.renderSlot(o.$slots,"no-results",e.normalizeProps(e.mergeProps({key:2},{retry:h})),()=>[I]):e.unref(c)==="error"?e.renderSlot(o.$slots,"error",e.normalizeProps(e.mergeProps({key:3},{retry:h})),()=>[L]):e.createCommentVNode("",!0)],512))}});s.VueEternalLoading=T,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
