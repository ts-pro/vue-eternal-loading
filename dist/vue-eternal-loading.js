"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");function N(r){return r.scrollHeight}function V(r){return r.scrollWidth}function k(r,s){r.scrollTop=r.scrollHeight-s+r.scrollTop}function I(r,s){r.scrollLeft=r.scrollWidth-s+r.scrollLeft}const L=e.createElementVNode("div",{class:"loading"},"Loading...",-1),q=e.createElementVNode("div",{class:"no-more"},"No more.",-1),F=e.createElementVNode("div",{class:"no-results"},"No results.",-1),O=e.createElementVNode("div",{class:"error"},"Error.",-1),z=e.defineComponent({__name:"VueEternalLoading",props:{load:{required:!0,type:Function},isInitial:{required:!1,type:Boolean,default:!0},position:{required:!1,type:String,default:"default"},container:{required:!1,type:Object,default:null},margin:{required:!1,type:String,default:void 0}},emits:["update:isInitial"],setup(r,{emit:s}){const t=r,l=e.ref();let a=e.ref("loading"),n=e.ref(t.isInitial);const S=typeof process<"u"&&process.env!==void 0&&process.env.NODE_ENV!=="test";let c=0;function d(){e.nextTick(()=>{var o,i;t.position==="top"?k((o=t.container)!=null?o:document.documentElement,c):t.position==="left"&&I((i=t.container)!=null?i:document.documentElement,c)})}function y(o,i){return o===0?n.value?(g(),"no-results"):(p(),"no-more"):o!==void 0&&i!==void 0&&o<i?(p(),"no-more"):(n.value=!1,d(),f(),"loading")}function p(){n.value=!1,u("no-more"),d()}function g(){n.value=!1,u("no-results"),d()}function _(){n.value=!1,u("error"),d()}function b(){n.value=!0,u("loading"),f()}function v(){u("loading"),f()}function u(o){a.value=o}function h(){l.value&&m.unobserve(l.value)}function f(){l.value&&m.observe(l.value)}function P(){return new IntersectionObserver(([o])=>{var i,E;o.isIntersecting&&(t.position==="top"?c=N((i=t.container)!=null?i:document.documentElement):t.position==="left"&&(c=V((E=t.container)!=null?E:document.documentElement)),h(),t.load({loaded:y,noMore:p,noResults:g,error:_},{isFirstLoad:n.value}))},{root:t.container,threshold:0,rootMargin:t.margin})}let m;return typeof IntersectionObserver<"u"&&e.watchEffect(()=>{m&&h(),m=P(),f()},{flush:"post"}),e.watch(()=>t.isInitial,o=>{o&&b()}),e.watch(n,o=>{o||s("update:isInitial",!1)}),(o,i)=>e.unref(S)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"vue-eternal-loading",ref_key:"rootRef",ref:l},[e.unref(a)==="loading"?e.renderSlot(o.$slots,"loading",e.normalizeProps(e.mergeProps({key:0},{isFirstLoad:e.unref(n)})),()=>[L]):e.unref(a)==="no-more"?e.renderSlot(o.$slots,"no-more",e.normalizeProps(e.mergeProps({key:1},{retry:v})),()=>[q]):e.unref(a)==="no-results"?e.renderSlot(o.$slots,"no-results",e.normalizeProps(e.mergeProps({key:2},{retry:v})),()=>[F]):e.unref(a)==="error"?e.renderSlot(o.$slots,"error",e.normalizeProps(e.mergeProps({key:3},{retry:v})),()=>[O]):e.createCommentVNode("",!0)],512))}});exports.VueEternalLoading=z;
